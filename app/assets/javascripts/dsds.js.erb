$(document).ready(function () {

    // Clear solicitor search results on ESC keypress
    $(document).on('keydown', function (event) {
        if ($('.solicitor_results_list *').length > 0 && event.keyCode === 27) {
            $('.solicitor_results_list').empty();
        }
    });

    var ownSolicitor_checked = ($("input[type='radio']#defence_request_solicitor_type_own:checked").length > 0);

    var own_setup = function () {
        $('#defence_request_solicitor_firm').removeAttr("disabled");
        $('#defence_request_solicitor_name').removeAttr("disabled");
        $('#defence_request_scheme').val("No Scheme");
        $('#defence_request_scheme').attr("disabled", "disabled");
    }

    var duty_setup = function () {
        $('#defence_request_solicitor_firm').attr("disabled", "disabled");
        $('#defence_request_solicitor_firm').val("");
        $('#defence_request_solicitor_name').attr("disabled", "disabled");
        $('#defence_request_solicitor_name').val("");
        $('#defence_request_scheme').removeAttr("disabled");
        $('.solicitor_results_list').html("")
        $('#q').val("")
    }

    if (ownSolicitor_checked) {
        $('.search_box').show();
        own_setup()
    } else {
        $('.search_box').hide();
        duty_setup()
    }

    $(".solicitor_type_radio").change(function () {
        if (this.value == "own") {
            $('.search_box').stop(true, true).show(1000);
            own_setup()
        } else {
            $('.search_box').stop(true, true).hide(1000);
            duty_setup()
        }
    });
});

// calls action refreshing the partial
function refreshPartial() {
    $.ajax({
        url: "defence_requests/refresh_dashboard"
    })
}
